<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>This is currently a console game</h1>
    <p>
      Inspect this page (or press F12) and open the devloper console to see the
      outcomes.
    </p>
    <script>
      // Delimit the available choices
      const choices = Array("rock", "paper", "scissors");
      let play = confirm(
        "Would you like to play a game?\n\tThis will let you play 5\n\trounds of Rock, Paper, Scissors!"
      );

      if (play) {
        console.log("Starting game...");
        game();
      } else {
        console.log("Cancelling game.");
      }

      // Get the computer guess
      function getComputerChoice(choices) {
        return choices[Math.floor(Math.random() * choices.length)];
      }

      // Get player choice
      function getPlayerChoice(choices) {
        let keepGoing = true;

        while (keepGoing) {
          let pick = prompt(
            `Your choices are: Rock, Paper, or Scissors.\nWhat is your choice?`
          );
          if (!choices.includes(pick.toLowerCase())) {
            console.log("Invalid choice.  Try again.");
            keepGoing = true;
          } else {
            keepGoing = false;
            return pick.toLowerCase();
          }
        }
      }

      // win conditions
      // Rock beats scissors
      // Scissors beats paper
      // Paper beats rock

      // Compare choices
      function compareChoices(computerChoice, playerChoice) {
        let message;
        let player = playerChoice;
        let computer = computerChoice;

        if (player === computerChoice) {
          return "tie";
          // player win
        } else if (
          (player === "rock" && computer === "scissors") ||
          (player === "scissors" && computer === "paper") ||
          (player === "paper" && computer === "rock")
        ) {
          return "player";
          // computer win
        } else {
          return "computer";
        }
      }

      // Display outcome
      function showOutcome() {
        return compareChoices(computerChoice, playerChoice);
      }

      // game start
      function game() {
        let playerWins = 0;
        let computerWins = 0;
        let round = 0;
        let totalRounds = 5;
        let ties = 0;

        while (round < totalRounds) {
          let computerChoice = getComputerChoice(choices);
          let playerChoice = getPlayerChoice(choices);
          let outcome = compareChoices(computerChoice, playerChoice);
          let outcomeMessage = "";

          switch (outcome) {
            // tie case
            case "tie":
              ties += 1;
              outcomeMessage = "It's a tie!";
              break;
            // player wins case
            case "player":
              playerWins += 1;
              outcomeMessage = "Player wins! :D";
              break;
            // computer wins case
            case "computer":
              outcomeMessage = "Computer wins! :(";
              computerWins += 1;
              break;
          }
          // display outcome in an array at the console
          console.log(outcomeMessage);
          round += 1;
        }

        // output total wins/ties in a table at console
        const outcomeArray = [
          ["Player Wins", playerWins],
          ["Computer Wins", computerWins],
          ["Ties", ties],
        ];
        console.table(outcomeArray);
      }
    </script>
  </body>
</html>
